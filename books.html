<!DOCTYPE html>
<head>
    <title>ATC Books</title>
    <link href="main.css" type="text/css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
</head>
<body>
    <div class="nav-wrapper">
        <div class="left-nav">
            <div class="nav-link-wrapper">
                <a href="index.html">Home</a>
            </div>
              <div class="nav-link-wrapper ">
                  <a href="games.html">Games</a>
              </div>
              <div class="nav-link-wrapper active-nav-link">
                  <a href="books.html">Books</a>
              </div>
          </div>
    
          <div class="right-nav">
              <div class="brand">
                  <div>ATC Game Center</div>
              </div>
    
          </div>
        </div> 
    <div class="books-container" id="books-container">
        <h2>ATC Books</h2>   
        <h3>books!</h3>  
        <a href="https://docs.google.com/presentation/d/1YOXf8V1QHzb260xy7wxj6FEVY-7WgwxcVSvMeBah5BE/edit?usp=sharing">Test Book</a>
    </div>

    <script>
        docsURL = "https://docs.google.com/presentation/d/"; //only for documents
        fileURL = "https://coding-girl314.github.io/AT-RedGreenGame/book_ID.txt";

        async function* makeTextFileLineIterator(fileURL) {
            const utf8Decoder = new TextDecoder('utf-8');
            const response = await fetch(fileURL); //, {mode: 'no-cors'});
            const reader = response.body.getReader();
            let { value: chunk, done: readerDone } = await reader.read();
            chunk = chunk ? utf8Decoder.decode(chunk) : '';

            const re = /\n|\r|\r\n/gm;
            let startIndex = 0;
            let result;

            for (;;) {
                let result = re.exec(chunk);
                if (!result) {
                if (readerDone) {
                    break;
                }
                let remainder = chunk.substr(startIndex);
                ({ value: chunk, done: readerDone } = await reader.read());
                chunk = remainder + (chunk ? utf8Decoder.decode(chunk) : '');
                startIndex = re.lastIndex = 0;
                continue;
                }
                yield chunk.substring(startIndex, result.index);
                startIndex = re.lastIndex;
            }
            if (startIndex < chunk.length) {
                // last line didn't end in a newline char
                yield chunk.substr(startIndex);
            }
        }

        async function run() {
            for await (let line of makeTextFileLineIterator(fileURL)) {
                console.log(line);
                var books_container = document.getElementById('books-container');
                console.log(docsURL + line);
                var a1 = document.createElement('a');
                a1.setAttribute('href', docsURL + line);
                a1.innerHTML = "book title";
                books_container.appendChild(a1);
            }
        }

        run();
             
    </script> 
</div>
</body>